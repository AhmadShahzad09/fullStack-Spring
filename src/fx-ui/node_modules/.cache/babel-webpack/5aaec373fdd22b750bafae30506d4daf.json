{"ast":null,"code":"import _asyncToGenerator from \"/workspaces/fx-deals/src/fx-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { FxDealDialogComponent } from './fx-deal-dialog/fx-deal-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"./data.service\";\nimport * as i3 from \"./top-bar/top-bar.component\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"./fx-deal-search/fx-deal-search.component\";\nimport * as i6 from \"./fx-deal-list/fx-deal-list.component\";\nimport * as i7 from \"@angular/material/progress-spinner\";\nconst _c0 = [\"list\"];\n\nfunction AppComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵelement(1, \"mat-spinner\", 9);\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c1 = function (a0, a1) {\n  return {\n    \"alert-danger\": a0,\n    \"alert-success\": a1\n  };\n};\n\nfunction AppComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelementStart(1, \"span\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c1, ctx_r1.alertState.status === \"danger\", ctx_r1.alertState.status === \"success\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.alertState.message, \" \");\n  }\n}\n\nexport class AppComponent {\n  constructor(dialog, dataService) {\n    this.dialog = dialog;\n    this.dataService = dataService;\n    this.title = 'fx-ui';\n    this.loading = true;\n    this.alertState = {\n      visible: false,\n      status: '',\n      message: ''\n    };\n  }\n\n  openDialog() {\n    const dialogRef = this.dialog.open(FxDealDialogComponent);\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        result.timestamp = new Date().toJSON();\n        this.createFxDeal(result);\n      }\n    });\n  }\n\n  createFxDeal(fxDeal) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.loading = true;\n\n      try {\n        const response = yield _this.dataService.createFxDeal(fxDeal);\n\n        if (!response.ok) {\n          const {\n            error\n          } = yield response.json();\n\n          _this.setAlertState({\n            visible: true,\n            status: 'danger',\n            message: error.message\n          });\n\n          return;\n        }\n\n        _this.setAlertState({\n          visible: true,\n          status: 'success',\n          message: 'Success!'\n        });\n\n        _this.refreshList();\n      } catch (e) {\n        _this.setAlertState({\n          visible: true,\n          status: 'danger',\n          message: 'Error!'\n        });\n      } finally {\n        _this.loading = false;\n      }\n    })();\n  }\n\n  setAlertState(alertState) {\n    this.alertState = alertState; // show alert for 3 seconds\n\n    setTimeout(() => {\n      this.alertState.visible = false;\n    }, 3000);\n  }\n\n  onLoading(status) {\n    this.loading = status;\n  }\n\n  refreshList() {\n    var _a;\n\n    (_a = this.list) === null || _a === void 0 ? void 0 : _a.getAllFxDeals();\n  }\n\n}\n\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.DataService));\n};\n\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  viewQuery: function AppComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.list = _t.first);\n    }\n  },\n  decls: 12,\n  vars: 2,\n  consts: [[\"class\", \"spinner-overlay\", 4, \"ngIf\"], [\"class\", \"alert\", 3, \"ngClass\", 4, \"ngIf\"], [1, \"container\", \"align-right\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"click\"], [1, \"container\"], [1, \"row\"], [3, \"alert\", \"loading\"], [\"list\", \"\"], [1, \"spinner-overlay\"], [1, \"spinner\"], [1, \"alert\", 3, \"ngClass\"], [1, \"alert-text\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-top-bar\");\n      i0.ɵɵtemplate(1, AppComponent_div_1_Template, 2, 0, \"div\", 0);\n      i0.ɵɵtemplate(2, AppComponent_div_2_Template, 3, 5, \"div\", 1);\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵelementStart(4, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_4_listener() {\n        return ctx.openDialog();\n      });\n      i0.ɵɵtext(5, \" Create Fx Deal \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 4);\n      i0.ɵɵelementStart(7, \"div\", 5);\n      i0.ɵɵelementStart(8, \"fx-deal-search\", 6);\n      i0.ɵɵlistener(\"alert\", function AppComponent_Template_fx_deal_search_alert_8_listener($event) {\n        return ctx.setAlertState($event);\n      })(\"loading\", function AppComponent_Template_fx_deal_search_loading_8_listener($event) {\n        return ctx.onLoading($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 5);\n      i0.ɵɵelementStart(10, \"fx-deal-list\", 6, 7);\n      i0.ɵɵlistener(\"alert\", function AppComponent_Template_fx_deal_list_alert_10_listener($event) {\n        return ctx.setAlertState($event);\n      })(\"loading\", function AppComponent_Template_fx_deal_list_loading_10_listener($event) {\n        return ctx.onLoading($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.loading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.alertState.visible);\n    }\n  },\n  directives: [i3.TopBarComponent, i4.NgIf, i5.FxDealSearchComponent, i6.FxDealListComponent, i7.MatSpinner, i4.NgClass],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAuY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"sources":["/workspaces/fx-deals/src/fx-ui/src/app/app.component.ts"],"names":["FxDealDialogComponent","i0","i1","i2","i3","i4","i5","i6","i7","_c0","AppComponent_div_1_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","_c1","a0","a1","AppComponent_div_2_Template","ɵɵtext","ctx_r1","ɵɵnextContext","ɵɵproperty","ɵɵpureFunction2","alertState","status","ɵɵadvance","ɵɵtextInterpolate1","message","AppComponent","constructor","dialog","dataService","title","loading","visible","openDialog","dialogRef","open","afterClosed","subscribe","result","timestamp","Date","toJSON","createFxDeal","fxDeal","response","ok","error","json","setAlertState","refreshList","e","setTimeout","onLoading","_a","list","getAllFxDeals","ɵfac","AppComponent_Factory","t","ɵɵdirectiveInject","MatDialog","DataService","ɵcmp","ɵɵdefineComponent","type","selectors","viewQuery","AppComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","decls","vars","consts","template","AppComponent_Template","ɵɵtemplate","ɵɵlistener","AppComponent_Template_button_click_4_listener","AppComponent_Template_fx_deal_search_alert_8_listener","$event","AppComponent_Template_fx_deal_search_loading_8_listener","AppComponent_Template_fx_deal_list_alert_10_listener","AppComponent_Template_fx_deal_list_loading_10_listener","directives","TopBarComponent","NgIf","FxDealSearchComponent","FxDealListComponent","MatSpinner","NgClass","styles"],"mappings":"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","sourcesContent":["import { FxDealDialogComponent } from './fx-deal-dialog/fx-deal-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"./data.service\";\nimport * as i3 from \"./top-bar/top-bar.component\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"./fx-deal-search/fx-deal-search.component\";\nimport * as i6 from \"./fx-deal-list/fx-deal-list.component\";\nimport * as i7 from \"@angular/material/progress-spinner\";\nconst _c0 = [\"list\"];\nfunction AppComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵelement(1, \"mat-spinner\", 9);\n    i0.ɵɵelementEnd();\n} }\nconst _c1 = function (a0, a1) { return { \"alert-danger\": a0, \"alert-success\": a1 }; };\nfunction AppComponent_div_2_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelementStart(1, \"span\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c1, ctx_r1.alertState.status === \"danger\", ctx_r1.alertState.status === \"success\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.alertState.message, \" \");\n} }\nexport class AppComponent {\n    constructor(dialog, dataService) {\n        this.dialog = dialog;\n        this.dataService = dataService;\n        this.title = 'fx-ui';\n        this.loading = true;\n        this.alertState = {\n            visible: false,\n            status: '',\n            message: '',\n        };\n    }\n    openDialog() {\n        const dialogRef = this.dialog.open(FxDealDialogComponent);\n        dialogRef.afterClosed().subscribe((result) => {\n            if (result) {\n                result.timestamp = new Date().toJSON();\n                this.createFxDeal(result);\n            }\n        });\n    }\n    async createFxDeal(fxDeal) {\n        this.loading = true;\n        try {\n            const response = await this.dataService.createFxDeal(fxDeal);\n            if (!response.ok) {\n                const { error } = await response.json();\n                this.setAlertState({\n                    visible: true,\n                    status: 'danger',\n                    message: error.message,\n                });\n                return;\n            }\n            this.setAlertState({\n                visible: true,\n                status: 'success',\n                message: 'Success!',\n            });\n            this.refreshList();\n        }\n        catch (e) {\n            this.setAlertState({\n                visible: true,\n                status: 'danger',\n                message: 'Error!',\n            });\n        }\n        finally {\n            this.loading = false;\n        }\n    }\n    setAlertState(alertState) {\n        this.alertState = alertState;\n        // show alert for 3 seconds\n        setTimeout(() => { this.alertState.visible = false; }, 3000);\n    }\n    onLoading(status) {\n        this.loading = status;\n    }\n    refreshList() {\n        var _a;\n        (_a = this.list) === null || _a === void 0 ? void 0 : _a.getAllFxDeals();\n    }\n}\nAppComponent.ɵfac = function AppComponent_Factory(t) { return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.DataService)); };\nAppComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: AppComponent, selectors: [[\"app-root\"]], viewQuery: function AppComponent_Query(rf, ctx) { if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n    } if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.list = _t.first);\n    } }, decls: 12, vars: 2, consts: [[\"class\", \"spinner-overlay\", 4, \"ngIf\"], [\"class\", \"alert\", 3, \"ngClass\", 4, \"ngIf\"], [1, \"container\", \"align-right\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"click\"], [1, \"container\"], [1, \"row\"], [3, \"alert\", \"loading\"], [\"list\", \"\"], [1, \"spinner-overlay\"], [1, \"spinner\"], [1, \"alert\", 3, \"ngClass\"], [1, \"alert-text\"]], template: function AppComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelement(0, \"app-top-bar\");\n        i0.ɵɵtemplate(1, AppComponent_div_1_Template, 2, 0, \"div\", 0);\n        i0.ɵɵtemplate(2, AppComponent_div_2_Template, 3, 5, \"div\", 1);\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelementStart(4, \"button\", 3);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_4_listener() { return ctx.openDialog(); });\n        i0.ɵɵtext(5, \" Create Fx Deal \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 4);\n        i0.ɵɵelementStart(7, \"div\", 5);\n        i0.ɵɵelementStart(8, \"fx-deal-search\", 6);\n        i0.ɵɵlistener(\"alert\", function AppComponent_Template_fx_deal_search_alert_8_listener($event) { return ctx.setAlertState($event); })(\"loading\", function AppComponent_Template_fx_deal_search_loading_8_listener($event) { return ctx.onLoading($event); });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 5);\n        i0.ɵɵelementStart(10, \"fx-deal-list\", 6, 7);\n        i0.ɵɵlistener(\"alert\", function AppComponent_Template_fx_deal_list_alert_10_listener($event) { return ctx.setAlertState($event); })(\"loading\", function AppComponent_Template_fx_deal_list_loading_10_listener($event) { return ctx.onLoading($event); });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n    } if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.alertState.visible);\n    } }, directives: [i3.TopBarComponent, i4.NgIf, i5.FxDealSearchComponent, i6.FxDealListComponent, i7.MatSpinner, i4.NgClass], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAuY29tcG9uZW50LmNzcyJ9 */\"] });\n"]},"metadata":{},"sourceType":"module"}